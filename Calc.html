<!DOCTYPE html>
<!-- saved from url=(0039)https://calculator.prospectingwiki.org/ -->
<html lang="en" data-theme="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Prospecting Drop Calculator — Final version: Updated 15/11/25</title>
<style>
  :root { --bg:#ffffff; --fg:#0e1013; --muted:#6b7280; --card:#ffffff; --border:#e5e7eb; --table-stripe:#f8fafc; --pill:#f3f4f6; --best:#fff7e6; --accent:#111827; --shadow:0 8px 20px rgba(2,6,23,0.08); }
  [data-theme="dark"] { --bg:#0b0f17; --fg:#e5e7eb; --muted:#9aa0a6; --card:#0f1623; --border:#223048; --table-stripe:#111b2b; --pill:#1b2436; --best:#18240f; --accent:#e5e7eb; --shadow:0 8px 24px rgba(0,0,0,0.35); }
  * { box-sizing:border-box; }
  html,body{height:100%}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:var(--bg);color:var(--fg);font-size:17px;line-height:1.45}
  .wrap{max-width:1100px;margin:22px auto 80px;padding:56px 16px 0}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
  h1{font-size:1.7rem;margin:0;letter-spacing:.2px}
  .muted{color:var(--muted);font-size:.98rem}
  .card{border:1px solid var(--border);border-radius:16px;padding:18px;margin-top:16px;background:var(--card);box-shadow:var(--shadow)}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  label{font-weight:700;display:block;margin-bottom:8px}
  input,button,select{width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:12px;font-size:1.05rem;background:var(--bg);color:var(--fg)}
  input:focus,button:focus,select:focus{outline:3px solid rgba(99,102,241,.25);outline-offset:2px}
  table{width:100%;border-collapse:separate;border-spacing:0;font-size:1rem}
  th,td{text-align:left;padding:12px;border-bottom:1px solid var(--border);vertical-align:middle}
  thead th{position:sticky;top:0;background:var(--card);font-size:1.0rem;z-index:1}
  tbody tr:hover td{background:var(--table-stripe)}
  .right{text-align:right}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace}
  .pill{display:inline-block;padding:8px 12px;border-radius:999px;background:var(--pill);margin-right:10px;font-size:.95rem;font-weight:700}
  .head{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
  .mineralName{font-weight:800;font-size:1.15rem}
  .best{background:var(--best)!important}
  .borderLeft{border-left:6px solid transparent}
  .theme-toggle{position:fixed;top:16px;right:16px;z-index:9999;background:var(--card);color:var(--fg);border:1px solid var(--border);border-radius:999px;padding:10px 14px;font-size:1rem;cursor:pointer;box-shadow:var(--shadow)}
  .controls-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px}
  .full-row{margin-bottom:8px}
  @media(max-width:1000px){.row{grid-template-columns:1fr}.controls-grid{grid-template-columns:1fr}}
  .select{position:relative;min-width:300px}
  .select-btn{display:flex;align-items:center;justify-content:space-between;gap:12px;width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:12px;background:var(--bg);color:var(--fg);cursor:pointer;box-shadow:var(--shadow)}
  .select-btn .label{display:flex;align-items:center;gap:10px;font-weight:700}
  .dot{width:10px;height:10px;border-radius:999px;display:inline-block;border:1px solid var(--border)}
  .select-list{position:absolute;left:0;right:0;top:calc(100% + 8px);background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);max-height:320px;overflow:auto;padding:6px;display:none;z-index:10}
  .select.open .select-list{display:block}
  .option{display:flex;align-items:center;gap:10px;padding:10px 10px;border-radius:10px;cursor:pointer;font-weight:600}
  .option:hover,.option.active{background:var(--table-stripe)}
  .option .opt-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .gradient-text{background:linear-gradient(90deg,red,orange,yellow,green,blue,indigo,violet);-webkit-background-clip:text;background-clip:text;color:transparent}
</style>
<style type="text/css">:root img[width="728"][height="90"], :root [href="https://adstub.net/cina777/"], :root [href="https://adstub.net/arab777/"], :root [href="https://adstub.net/ratu89/"], :root [href="https://adstub.net/judi89/"], :root [href^="//mage98rquewz.com/"], :root [href^="//x4pollyxxpush.com/"], :root span[id^="ezoic-pub-ad-placeholder-"], :root ins.adsbygoogle[data-ad-slot], :root ins.adsbygoogle[data-ad-client], :root img[src^="https://s-img.adskeeper.com/"], :root guj-ad, :root gpt-ad, :root div[id^="zergnet-widget"], :root div[id^="vuukle-ad-"], :root div[id^="taboola-stream-"], :root div[id^="sticky_ad_"], :root div[id^="st"][style^="z-index: 999999999;"], :root div[id^="gpt_ad_"], :root div[id^="ezoic-pub-ad-"], :root div[id^="dfp-ad-"], :root div[id^="crt-"][style], :root div[id^="apn_native_ad_slot_"], :root div[id^="adspot-"], :root div[id^="adrotate_widgets-"], :root ps-connatix-module, :root div[id^="ad_position_"], :root div[id^="ad-div-"], :root div[id*="ScriptRoot"], :root div[id*="MarketGid"], :root [href="https://adstub.net/rusia777/"], :root div[data-id-advertdfpconf], :root div[data-dfp-id], :root hl-adsense, :root div[data-contentexchange-widget], :root div[data-alias="300x250 Ad 2"], :root div[data-adzone], :root div[data-adunit-path], :root div[data-adname], :root div[data-ad-targeting], :root div[data-ad-region], :root div[data-ad-placeholder], :root div[aria-label="Ads"], :root display-ads, :root display-ad-component, :root atf-ad-slot, :root aside[id^="adrotate_widgets-"], :root amp-fx-flying-carpet, :root amp-embed[type="taboola"], :root amp-connatix-player, :root amp-ad-custom, :root amp-ad, :root div[id^="google_dfp_"], :root ad-slot, :root ad-shield-ads, :root a[style="width:100%;height:100%;z-index:10000000000000000;position:absolute;top:0;left:0;"], :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"] + .ob_source, :root a[onclick^="window.location.replace('https://random-affiliate.atimaze.com/"], :root a[href^="https://xbet-4.com/"], :root div[id^="ad-position-"], :root a[href^="https://www.toprevenuegate.com/"], :root a[href^="https://www.purevpn.com/"][href*="&utm_source=aff-"], :root a[href^="https://www.privateinternetaccess.com/"] > img, :root a[href^="https://financeads.net/tc.php?"], :root a[href^="https://www.mrskin.com/tour"], :root a[href^="https://www.infowarsstore.com/"] > img, :root a[href^="https://www.highperformancecpmgate.com/"], :root a[href^="https://www.highcpmrevenuenetwork.com/"], :root a[href^="https://www.get-express-vpn.com/offer/"], :root a[href^="https://lnkxt.bannerator.com/"], :root a[href^="https://www.geekbuying.com/dynamic-ads/"], :root a[href^="https://www.financeads.net/tc.php?"], :root a[href^="https://www.effectiveratecpm.com/"], :root [href^="https://www.herbanomic.com/"] > img, :root a[href^="https://maymooth-stopic.com/"], :root a[href^="https://www.dql2clk.com/"], :root a[href^="https://www.nutaku.net/signup/landing/"], :root a[href^="https://www.dating-finder.com/signup/?ai_d="], :root a[href^="https://explore-site.com/"], :root a[href^="https://www.brazzersnetwork.com/landing/"], :root [data-template-type="nativead"], :root a[href^="https://www.endorico.com/Smartlink/"], :root a[href^="https://www.adultempire.com/"][href*="?partner_id="], :root a[href^="https://voluum.prom-xcams.com/"], :root a[href^="https://twinrdsyte.com/"], :root a[href^="https://twinrdsrv.com/"], :root a[href^="https://trk.nfl-online-streams.club/"], :root a[href^="https://tracking.avapartner.com/"], :root a[href^="https://track.wg-aff.com"], :root a[href^="https://track.ultravpn.com/"], :root a[href^="https://track.afcpatrk.com/"], :root a[href^="https://torguard.net/aff.php"] > img, :root [data-identity="adhesive-ad"], :root a[href^="https://tc.tradetracker.net/"] > img, :root a[href^="https://tatrck.com/"], :root a[href^="https://click.candyoffers.com/"], :root [href^="https://zstacklife.com/"] img, :root a[href^="https://t.aslnk.link/"], :root a[href^="https://t.adating.link/"], :root a[href^="https://go.trackitalltheway.com/"], :root [href^="https://track.fiverr.com/visit/"] > img, :root a[href^="https://syndication.exoclick.com/"], :root a[href^="https://syndication.dynsrvtbg.com/"], :root div[data-alias="300x250 Ad 1"], :root a[href^="https://syndicate.contentsserved.com/"], :root a[href^="https://svb-analytics.trackerrr.com/"], :root a[href^="https://track.aftrk5.com/"], :root a[href^="https://slkmis.com/"], :root a[href^="https://myclick-2.com/"], :root a[href^="https://sexynearme.com/"], :root [data-ad-manager-id], :root a[href^="https://s.zlinkr.com/"], :root bottomadblock, :root a[href^="https://s.zlinkd.com/"], :root [href="https://adstub.net/gaza88/"], :root a[href^="https://ad.doubleclick.net/"], :root a[href^="https://static.fleshlight.com/images/banners/"], :root a[href^="https://s.zlink7.com/"], :root a[href^="https://s.zlink3.com/"], :root a[href^="https://www.mrskin.com/account/"], :root a[href^="https://s.optzsrv.com/"], :root a[href^="https://s.ma3ion.com/"], :root a[href^="https://s.eunow4u.com/"], :root #kt_player > div[style$="display: block;"][style*="inset: 0px;"], :root [href$="/sexdating.php"], :root a[href^="https://quotationfirearmrevision.com/"], :root a[href^="https://pubads.g.doubleclick.net/"], :root a[href^="https://prf.hn/click/"][href*="/camref:"] > img, :root a[href^="https://www.dating-finder.com/?ai_d="], :root a[href^="https://serve.awmdelivery.com/"], :root a[href^="https://prf.hn/click/"][href*="/adref:"] > img, :root app-ad, :root [href^="https://ap.octopuspop.com/click/"] > img, :root a[href^="https://postback1win.com/"], :root a[href^="https://mmwebhandler.aff-online.com/"], :root a[href^="https://www.bet365.com/"][href*="affiliate="], :root a[href^="https://pb-track.com/"], :root a[href^="https://pb-front.com/"], :root a[href^="https://paid.outbrain.com/network/redir?"], :root a[href^="https://streamate.com/landing/click/"], :root div[class^="Adstyled__AdWrapper-"], :root a[href^="https://osfultrbriolenai.info/"], :root a[href^="https://upsups.click/"], :root a[href^="https://ndt5.net/"], :root a[href^="https://natour.naughtyamerica.com/track/"], :root a[href^="https://mediaserver.entainpartners.com/renderBanner.do?"], :root a[href^="https://lead1.pl/"], :root a[href^="https://landing.brazzersnetwork.com/"], :root a[href^="https://join.virtuallust3d.com/"], :root a[href^="https://kiksajex.com/"], :root a[href^="https://juicyads.in/"], :root a[href^="https://snowdayonline.xyz/"], :root a[href^="https://mediaserver.gvcaffiliates.com/renderBanner.do?"], :root a[href^="https://join.dreamsexworld.com/"], :root a[href^="https://join.bannedsextapes.com/track/"], :root a[href^="https://jaxofuna.com/"], :root a[href^="https://italarizege.xyz/"], :root a[href^="https://iqbroker.com/"][href*="?aff="], :root a[href^="https://identicaldrench.com/"], :root a[href^="https://hot-growngames.life/"], :root a[href^="https://helmethomicidal.com/"], :root a[href^="https://golinks.work/"], :root a[href^="https://s.zlinkn.com/"], :root a[href^="https://go.xxxvjmp.com/"], :root a[href^="https://go.xxxjmp.com"], :root [class^="tile-picker__CitrusBannerContainer-sc-"], :root a[href^="https://go.xxxiijmp.com"], :root a[href^="https://go.xtbaffiliates.com/"], :root [data-role="tile-ads-module"], :root a[href^="https://go.xlviirdr.com"], :root div[class$="-adlabel"], :root a[href^="https://go.xlviiirdr.com"], :root a[href^="https://ismlks.com/"], :root [href^="https://www.mypillow.com/"] > img, :root a[href^="https://go.xlirdr.com"], :root [data-css-class="dfp-inarticle"], :root a[href^="https://l.hyenadata.com/"], :root a[href^="https://go.tmrjmp.com"], :root a[href^="https://zirdough.net/"], :root a[href^="https://s.deltraff.com/"], :root a[href^="https://go.markets.com/visit/?bta="], :root a[href^="https://billing.purevpn.com/aff.php"] > img, :root a[href^="https://go.hpyrdr.com/"], :root a[href^="https://lijavaxa.com/"], :root a[href^="https://go.goaserv.com/"], :root a[href^="https://t.hrtye.com/"], :root a[href^="https://go.etoro.com/"] > img, :root a[href^="https://go.dmzjmp.com"], :root a[href^="https://www.bang.com/?aff="], :root #mgb-container > #mgb, :root a[href^="https://go.admjmp.com"], :root a[href^="https://ak.stikroltiltoowi.net/"], :root a[href^="https://get.surfshark.net/aff_c?"][href*="&aff_id="] > img, :root a[href^="https://www.adskeeper.com"], :root a[data-redirect^="https://paid.outbrain.com/network/redir?"], :root [href^="https://clicks.affstrack.com/"] > img, :root a[href^="https://engine.phn.doublepimp.com/"], :root a[href^="https://engine.blueistheneworanges.com/"], :root a[href^="https://drumskilxoa.click/"], :root a[href^="https://dl-protect.net/"], :root a[href*=".foxqck.com/"], :root a[href^="https://ctosrd.com/"], :root a[href^="https://clixtrac.com/"], :root [href^="https://noqreport.com/"] > img, :root a[href^="https://clicks.pipaffiliates.com/"], :root app-advertisement, :root a[href^="https://getmatchedlocally.com/"], :root a[href^="https://clickins.slixa.com/"], :root a[href^="https://datewhisper.life/"], :root a[href^="https://get-link.xyz/"], :root a[href^="https://click.linksynergy.com/fs-bin/"] > img, :root a[href^="https://combodef.com/"], :root a[href^="https://click.hoolig.app/"], :root a[href^="https://www.onlineusershielder.com/"], :root a[href^="https://click.ggpickaff.com/"], :root a[href^="https://track.totalav.com/"], :root a[href^="https://ctrdwm.com/"], :root img[src^="https://images.purevpnaffiliates.com"], :root a[href^="https://porntubemate.com/"], :root a[href^="https://clickadilla.com/"], :root a[href^="https://click.dtiserv2.com/"], :root a[href^="https://www.adxsrve.com/"], :root a[href^="https://click.Ggpickaff.com/"], :root a[href^="https://go.xlvirdr.com"], :root a[href^="http://www.iyalc.com/"], :root a[href^="https://stardomcoit.com/"], :root a[href^="https://claring-loccelkin.com/"], :root a[href^="https://bongacams2.com/track?"], :root a[href^="https://t.ajrkm1.com/"], :root a[href^="https://bongacams10.com/track?"], :root a[href^="https://www.sheetmusicplus.com/"][href*="?aff_id="], :root a[href^="https://bngpt.com/"], :root a[href^="//hoodingluster.com/"], :root a[href^="https://black77854.com/"], :root a[href^="http://annulmentequitycereals.com/"], :root [data-taboola-options], :root a[href^="https://believessway.com/"], :root a[href^="https://Click.ggpickaff.com/"], :root a[href^="https://banners.livepartners.com/"], :root a[href^="http://revolvemockerycopper.com/"], :root a[href^="https://awptjmp.com/"], :root a[href^="https://join.sexworld3d.com/track/"], :root a[href^="https://aweptjmp.com/"], :root a[href^="https://ausoafab.net/"], :root a[href^="https://aj1070.online/"], :root a[href^="https://bc.game/"], :root a[href^="https://ak.oalsauwy.net/"], :root a[href^="https://a.bestcontentoperation.top/"], :root a[href^="https://adultfriendfinder.com/go/"], :root a[href^="https://ads.planetwin365affiliate.com/"], :root a[href^="https://ads.leovegas.com/"], :root .nya-slot[style], :root a[href^="https://a.bestcontentweb.top/"], :root a[href^="https://a2.adform.net/"], :root a[href^="https://a.candyai.love/"], :root a[href^="https://playnano.online/offerwalls/?ref="], :root a[href^="https://a.adtng.com/"], :root .banner-img > .pbl, :root [data-m-ad-id], :root a[href^="https://a-ads.com/"], :root [id^="ad_slider"], :root a[href^="https://click.ggpickyaff.com/"], :root broadstreet-zone-container, :root a[href^="https://ak.psaltauw.net/"], :root a[href^="https://1winpb.com/"], :root div[id^="rc-widget-"], :root a[href^="https://turnstileunavailablesite.com/"], :root a[href^="https://chaturbate.com/in/?"], :root a[href^="https://prf.hn/click/"][href*="/creativeref:"] > img, :root a[href*="&maxads="], :root a[href^="http://www.adultempire.com/unlimited/promo?"][href*="&partner_id="], :root a[href^="https://1betandgonow.com/"], :root div[id^="optidigital-adslot"], :root [href^="https://wsup.ai/"], :root a[href^="https://123-stream.org/"], :root a[href^="https://in.rabbtrk.com/"], :root a[href^="http://www.h4trck.com/"], :root a[href^="http://www.friendlyduck.com/AF_"], :root a[href^="http://partners.etoro.com/"], :root [href="https://chaturbate.jjgirls.com/"] > img, :root a[href^="http://cam4com.go2cloud.org/aff_c?"], :root a[href^="https://ads.betfair.com/redirect.aspx?"], :root a[href^="http://trk.globwo.online/"], :root a[href^="http://troopsassistedstupidity.com/"], :root a[href^="https://random-affiliate.atimaze.com/"], :root a-ad, :root a[href^="https://offhandpump.com/"], :root a[href^="http://stickingrepute.com/"], :root #slashboxes > .deals-rail, :root a[href^="http://join.brokestraightboys.com/track/"], :root a[href^="http://roadcontagion.com/"], :root a[href^="http://premonitioninventdisagree.com/"], :root [href^="http://mypillow.com/"] > img, :root a[href^="http://bongacams.com/track?"], :root a[href^="https://track.adform.net/"], :root a[href^="http://avthelkp.net/"], :root a[href^="https://a.medfoodhome.com/"], :root a[href^="https://engine.flixtrial.com/"], :root [data-type="ad-vertical"], :root a[href^="//startgaming.net/tienda/" i], :root a[href^="https://a.medfoodsafety.com/"], :root a[href^="//go.eabids.com/"], :root a[href^="//ejitsirdosha.net/"], :root a[href^=" https://www.friendlyduck.com/AF_"], :root [data-cl-spot-id], :root a[href*="/jump/next.php?r="], :root a[href^="https://go.rmishe.com/"], :root [href^="https://ilovemyfreedoms.com/landing-"], :root a[href^="https://syndication.optimizesrv.com/"], :root a[href*="//daichoho.com/"], :root a[href^="https://go.nordvpn.net/aff"] > img, :root .\[\&_\.gdprAdTransparencyCogWheelButton\]\:\!pjra-z-\[5\], :root [href^="http://clicks.totemcash.com/"], :root a[href^="https://ad.zanox.com/ppc/"] > img, :root a[href^="https://lone-pack.com/"], :root [data-d-ad-id], :root a[href*=".engine.adglare.net/"], :root a[href^="https://t.ajrkm3.com/"], :root [href^="https://aads.com/campaigns/"], :root a[href^="//stighoazon.com/"], :root div[id^="lazyad-"], :root a[href^="http://com-1.pro/"], :root [href^="https://www.profitablegatecpm.com/"], :root a[href*=".cfm?domain="][href*="&fp="], :root [data-ad-name], :root a[href^="https://loboclick.com/"], :root a[data-url^="https://vulpix.bet/?ref="], :root a[href^="https://ab.advertiserurl.com/aff/"], :root a[data-oburl^="https://paid.outbrain.com/network/redir?"], :root a[href^="https://go.xlivrdr.com"], :root [onclick^="location.href='https://1337x.vpnonly.site/"], :root [id^="section-ad-banner"], :root a[href^="https://www.goldenfrog.com/vyprvpn?offer_id="][href*="&aff_id="], :root a[href^="https://wmctjd.com/"], :root a[href*="//jjgirls.com/sex/Chaturbate"], :root [id^="ad-wrap-"], :root [href^="https://zone.gotrackier.com/"], :root a[href^="http://sarcasmadvisor.com/"], :root [href^="https://www.restoro.com/"], :root [href^="https://www.targetingpartner.com/"], :root .section-subheader > .section-hotel-prices-header, :root [href^="https://www.hostg.xyz/"] > img, :root a[href^="http://adultfriendfinder.com/go/"], :root a[href^="https://fastestvpn.com/lifetime-special-deal?a_aid="], :root a[href^="https://tour.mrskin.com/"], :root [href^="https://www.brighteonstore.com/products/"] img, :root citrus-ad-wrapper, :root a[href^="https://go.grinsbest.com/"], :root a[href^="https://vo2.qrlsx.com/"], :root [href^="https://www.avantlink.com/click.php"] img, :root [href^="https://wwp.hoqodd.com/redirect-zone/"], :root div[id^="div-ads-"], :root [href^="https://rapidgator.net/article/premium/ref/"], :root [href^="https://join.girlsoutwest.com/"], :root a[href^="https://activate-game.com/"], :root .scroll-fixable.rail-right > .deals-rail, :root [data-wpas-zoneid], :root a[href^="https://track.aftrk3.com/"], :root [href^="https://join3.bannedsextapes.com"], :root a[href^="https://bodelen.com/"], :root a[href*=".g2afse.com/"], :root div[id^="adngin-"], :root [data-rc-widget], :root span[data-ez-ph-id], :root [href^="https://track.aftrk1.com/"], :root [href^="https://join.playboyplus.com/track/"], :root a[href^="https://go.xxxijmp.com"], :root [href^="https://istlnkcl.com/"], :root a[href^="https://t.acam.link/"], :root a[href^="https://go.strpjmp.com/"], :root [href^="https://url.totaladblock.com/"], :root a[href^="https://tm-offers.gamingadult.com/"], :root [href^="https://charmingdatings.life/"], :root [href="https://adstub.net/indo666/"], :root [href^="https://glersakr.com/"], :root a[href^="https://a.bestcontentfood.top/"], :root [href^="https://cpa.10kfreesilver.com/"], :root [data-id^="div-gpt-ad"], :root a[href^="https://tracker.loropartners.com/"], :root [href^="https://awbbjmp.com/"], :root div[ow-ad-unit-wrapper], :root a[data-href^="http://ads.trafficjunky.net/"], :root [data-advadstrackid], :root a[href^="https://www.friendlyduck.com/AF_"], :root [href^="https://ad1.adfarm1.adition.com/"], :root a[href^="https://bngprm.com/"], :root [href^="https://shiftnetwork.infusionsoft.com/go/"] > img, :root a[href^="https://go.bushheel.com/"], :root a[href^="https://ctjdwm.com/"], :root a[href^="https://camfapr.com/landing/click/"], :root div[data-ad-wrapper], :root .gnt_em_vp_c[data-g-s="vp_dk"], :root [href="//sexcams.plus/"], :root [href^="http://www.mypillow.com/"] > img, :root a[href^="https://promerycergerful.com/"], :root #kt_player > a[target="_blank"], :root [href="https://ourgoldguy.com/contact/"] img, :root .ob_container .item-container-obpd, :root [id^="div-gpt-ad"], :root [href="https://jdrucker.com/gold"] > img, :root a[href^="https://join.virtualtaboo.com/track/"], :root [id^="ad_sky"], :root [name^="google_ads_iframe"], :root a[href^="https://www.liquidfire.mobi/"], :root .grid > .container > #aside-promotion, :root DFP-AD, :root [href^="https://go.xlrdr.com"], :root a[href^="https://s.cant3am.com/"], :root [data-testid^="taboola-"], :root [data-testid^="section-AdRowBillboard"], :root a[href^="https://track.1234sd123.com/"], :root zeus-ad, :root [data-testid="prism-ad-wrapper"], :root [href^="https://ad.admitad.com/"], :root [href^="https://mypillow.com/"] > img, :root [data-testid="ad_testID"], :root a[href^="https://trk.softonixs.xyz/"], :root [href^="https://www.mypatriotsupply.com/"] > img, :root [href^="https://antiagingbed.com/discount/"] > img, :root a[href*=".adsrv.eacdn.com/"], :root a[href^="https://go.cmtaffiliates.com/"], :root [href^="https://optimizedelite.com/"] > img, :root [data-testid="adBanner-wrapper"], :root [href^="https://mylead.global/stl/"] > img, :root [href^="https://mypatriotsupply.com/"] > img, :root a[href^="https://go.hpyjmp.com"], :root iframe[scrolling="no"][sandbox*="allow-popups allow-modals"][style^="width: 100%; height: 100%; border: none;"], :root [href^="https://mystore.com/"] > img, :root [href^="https://wct.link/click?"], :root div[data-adunit], :root app-large-ad, :root [href^="https://turtlebids.irauctions.com/"] img, :root a[href^="https://witnessjacket.com/"], :root [data-mobile-ad-id], :root [data-dynamic-ads], :root [class^="amp-ad-"], :root a[href^="http://handgripvegetationhols.com/"], :root a[href^="https://go.rmhfrtnd.com"], :root a[href^="https://go.bbrdbr.com"], :root a[href^="https://fc.lc/ref/"], :root [data-adshim], :root topadblock, :root a[href^="//s.zlinkd.com/"], :root #teaser1[style^="width:autopx;"], :root [href^="https://www.cloudways.com/en/?id"], :root [data-asg-ins], :root a[href^="https://gamingadlt.com/?offer="], :root a[href^="https://rixofa.com/"], :root a[href^="https://best-experience-cool.com/"], :root [data-desktop-ad-id], :root [data-adbridg-ad-class], :root #teaser3[style^="width:autopx;"], :root [data-adblockkey], :root [data-block-type="ad"], :root [data-ad-width], :root [onclick*="content.ad/"], :root AMP-AD, :root [data-ad-cls], :root [data-ez-name], :root a[href^="https://go.mnaspm.com/"], :root a[href^="https://service.bv-aff-trx.com/"], :root a[href^="https://6-partner.com/"], :root [class^="s2nPlayer"], :root [href^="https://affiliate.fastcomet.com/"] > img, :root [class^="adDisplay-module"], :root a[href^="https://adclick.g.doubleclick.net/"], :root [data-freestar-ad][id], :root AD-SLOT, :root a[href^="https://www.googleadservices.com/pagead/aclk?"] > img, :root [data-ad-module], :root a[href^="https://go.skinstrip.net"][href*="?campaignId="], :root #teaser2[style^="width:autopx;"], :root [data-revive-zoneid], :root a[href^="https://losingoldfry.com/"], :root div[id^="div-gpt-"], :root a[href^="https://gml-grp.com/"], :root .ob_dual_right > .ob_ads_header ~ .odb_div, :root a[href^="http://tc.tradetracker.net/"] > img, :root [data-testid="commercial-label-taboola"], :root [class^="div-gpt-ad"], :root a[href^="https://traffdaq.com/"], :root a[href^="https://cam4com.go2cloud.org/"], :root a[href^="http://li.blogtrottr.com/click?"], :root a[href^="https://www8.smartadserver.com/"], :root a[href^="https://pb-imc.com/"], :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"], :root a[href^="https://t.ajump1.com/"], :root a[href^="https://wittered-mainging.com/"], :root #teaser3[style="width: 100%;text-align: center;display: scroll;position:fixed;bottom: 0;margin: 0 auto;z-index: 103;"] { display: none !important; }</style><style type="text/css" id="operaUserStyle"></style></head>
<body>
<button id="themeBtn" class="theme-toggle">Theme: <span id="themeLabel">Dark</span></button>
<div class="wrap">
  <header>
    <div>
      <h1>Prospecting Drop Calculator — Final version: Updated 15/11/25</h1>
      <div class="muted">Enter your <strong>Luck</strong> and <strong>Capacity</strong>. Pick a mineral. Multiple rolls per attempt are accounted for by your stats.</div>
    </div>
  </header>

  <div class="card">
    <div class="row">
      <div>
        <label for="luck">Luck</label>
        <input id="luck" type="number" min="0" step="any" value="10">
      </div>
      <div>
        <label for="capacity">Capacity</label>
        <input id="capacity" type="number" min="0" step="any" value="25">
      </div>
    </div>
    <div class="head" style="margin-top:10px;">
      <div class="pill" id="pulls">Rolls per attempt: 32.5</div>
      <div class="pill" id="bestBadge">Best location: Frozen Peak (0.0084%)</div>
    </div>
  </div>

  <div class="card">
    <div class="full-row">
      <label for="search">Search mineral</label>
      <input id="search" type="text" placeholder="Type part of the name...">
    </div>
    <div class="controls-grid">
      <div>
        <label for="rarityFilter">Filter by rarity</label>
        <select id="rarityFilter">
          <option value="">(all)</option>
          <option value="comun" style="color: rgb(154, 160, 166);">Common</option>
          <option value="poco_comun" style="color: rgb(52, 168, 83);">Uncommon</option>
          <option value="raro" style="color: rgb(66, 133, 244);">Rare</option>
          <option value="epico" style="color: rgb(161, 66, 244);">Epic</option>
          <option value="legendario" style="color: rgb(251, 188, 4);">Legendary</option>
          <option value="mitico" style="color: rgb(255, 0, 255);">Mythic</option>
          <option value="exotico" style="color: rgb(234, 67, 53);">Exotic</option>
        </select>
      </div>

      <div class="select" id="selectWrap">
        <label style="font-weight:700; margin-bottom:8px; display:block;">Select mineral</label>
        <div class="select-btn" id="selectBtn" aria-haspopup="listbox" aria-expanded="false">
          <div class="label"><span class="dot" id="selDot" style="background: rgb(251, 188, 4);"></span><span id="selText">Aetherite</span></div>
          <div>▾</div>
        </div>
        <div class="select-list" id="selectList" role="listbox" tabindex="-1" aria-activedescendant=""><div class="option" id="opt-0" role="option" data-idx="0"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Aetherite</span></div><div class="option" id="opt-1" role="option" data-idx="1"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Amber</span></div><div class="option" id="opt-2" role="option" data-idx="2"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Amethyst</span></div><div class="option" id="opt-3" role="option" data-idx="3"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Ammonite Fossil</span></div><div class="option" id="opt-4" role="option" data-idx="4"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Aquamarine</span></div><div class="option" id="opt-5" role="option" data-idx="5"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Ashvein</span></div><div class="option" id="opt-6" role="option" data-idx="6"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Aurorite</span></div><div class="option" id="opt-7" role="option" data-idx="7"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Azuralite</span></div><div class="option" id="opt-8" role="option" data-idx="8"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Blue Ice</span></div><div class="option" id="opt-9" role="option" data-idx="9"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Borealite</span></div><div class="option" id="opt-10" role="option" data-idx="10"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Catseye</span></div><div class="option" id="opt-11" role="option" data-idx="11"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Chrysoberyl</span></div><div class="option" id="opt-12" role="option" data-idx="12"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Cinnabar</span></div><div class="option" id="opt-13" role="option" data-idx="13"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Cobalt</span></div><div class="option" id="opt-14" role="option" data-idx="14"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Copper</span></div><div class="option" id="opt-15" role="option" data-idx="15"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Coral</span></div><div class="option" id="opt-16" role="option" data-idx="16"><span class="dot" style="background: rgb(234, 67, 53);"></span><span class="opt-text">Cryonic Artifact</span></div><div class="option" id="opt-17" role="option" data-idx="17"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Diamond</span></div><div class="option" id="opt-18" role="option" data-idx="18"><span class="dot" style="background: rgb(234, 67, 53);"></span><span class="opt-text">Dinosaur Skull</span></div><div class="option" id="opt-19" role="option" data-idx="19"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Dragon Bone</span></div><div class="option" id="opt-20" role="option" data-idx="20"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Emerald</span></div><div class="option" id="opt-21" role="option" data-idx="21"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Fire Opal</span></div><div class="option" id="opt-22" role="option" data-idx="22"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Firefly Stone</span></div><div class="option" id="opt-23" role="option" data-idx="23"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Flarebloom</span></div><div class="option" id="opt-24" role="option" data-idx="24"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Frostshard</span></div><div class="option" id="opt-25" role="option" data-idx="25"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Glacial Quartz</span></div><div class="option" id="opt-26" role="option" data-idx="26"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Gloomberry</span></div><div class="option" id="opt-27" role="option" data-idx="27"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Glowberry</span></div><div class="option" id="opt-28" role="option" data-idx="28"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Glowmoss</span></div><div class="option" id="opt-29" role="option" data-idx="29"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Gold</span></div><div class="option" id="opt-30" role="option" data-idx="30"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Golden Pearl</span></div><div class="option" id="opt-31" role="option" data-idx="31"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Inferlume</span></div><div class="option" id="opt-32" role="option" data-idx="32"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Iridium</span></div><div class="option" id="opt-33" role="option" data-idx="33"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Jade</span></div><div class="option" id="opt-34" role="option" data-idx="34"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Lapis Lazuli</span></div><div class="option" id="opt-35" role="option" data-idx="35"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Lightshard</span></div><div class="option" id="opt-36" role="option" data-idx="36"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Luminum</span></div><div class="option" id="opt-37" role="option" data-idx="37"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Malachite</span></div><div class="option" id="opt-38" role="option" data-idx="38"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Meteoric Iron</span></div><div class="option" id="opt-39" role="option" data-idx="39"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Mythril</span></div><div class="option" id="opt-40" role="option" data-idx="40"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Neodymium</span></div><div class="option" id="opt-41" role="option" data-idx="41"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Obsidian</span></div><div class="option" id="opt-42" role="option" data-idx="42"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Onyx</span></div><div class="option" id="opt-43" role="option" data-idx="43"><span class="dot" style="background: rgb(161, 66, 244);"></span><span class="opt-text">Osmium</span></div><div class="option" id="opt-44" role="option" data-idx="44"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Painite</span></div><div class="option" id="opt-45" role="option" data-idx="45"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Palladium</span></div><div class="option" id="opt-46" role="option" data-idx="46"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Pearl</span></div><div class="option" id="opt-47" role="option" data-idx="47"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Peridot</span></div><div class="option" id="opt-48" role="option" data-idx="48"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Pink Diamond</span></div><div class="option" id="opt-49" role="option" data-idx="49"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Platinum</span></div><div class="option" id="opt-50" role="option" data-idx="50"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Prismara</span></div><div class="option" id="opt-51" role="option" data-idx="51"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Pyrelith</span></div><div class="option" id="opt-52" role="option" data-idx="52"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Pyrite</span></div><div class="option" id="opt-53" role="option" data-idx="53"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Radiant Gold</span></div><div class="option" id="opt-54" role="option" data-idx="54"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Rose Gold</span></div><div class="option" id="opt-55" role="option" data-idx="55"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Ruby</span></div><div class="option" id="opt-56" role="option" data-idx="56"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Sapphire</span></div><div class="option" id="opt-57" role="option" data-idx="57"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Seashell</span></div><div class="option" id="opt-58" role="option" data-idx="58"><span class="dot" style="background: rgb(154, 160, 166);"></span><span class="opt-text">Silver</span></div><div class="option" id="opt-59" role="option" data-idx="59"><span class="dot" style="background: rgb(66, 133, 244);"></span><span class="opt-text">Silver Clamshell</span></div><div class="option" id="opt-60" role="option" data-idx="60"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Smoky Quartz</span></div><div class="option" id="opt-61" role="option" data-idx="61"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Specterite</span></div><div class="option" id="opt-62" role="option" data-idx="62"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Starshine</span></div><div class="option" id="opt-63" role="option" data-idx="63"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Titanium</span></div><div class="option" id="opt-64" role="option" data-idx="64"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Topaz</span></div><div class="option" id="opt-65" role="option" data-idx="65"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Tourmaline</span></div><div class="option" id="opt-66" role="option" data-idx="66"><span class="dot" style="background: rgb(234, 67, 53);"></span><span class="opt-text">Umbrite</span></div><div class="option" id="opt-67" role="option" data-idx="67"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Uranium</span></div><div class="option" id="opt-68" role="option" data-idx="68"><span class="dot" style="background: rgb(234, 67, 53);"></span><span class="opt-text">Vineheart</span></div><div class="option" id="opt-69" role="option" data-idx="69"><span class="dot" style="background: rgb(234, 67, 53);"></span><span class="opt-text">Voidstone</span></div><div class="option" id="opt-70" role="option" data-idx="70"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Volcanic Core</span></div><div class="option" id="opt-71" role="option" data-idx="71"><span class="dot" style="background: rgb(251, 188, 4);"></span><span class="opt-text">Volcanic Key</span></div><div class="option" id="opt-72" role="option" data-idx="72"><span class="dot" style="background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);"></span><span class="opt-text gradient-text">Vortessence</span></div><div class="option" id="opt-73" role="option" data-idx="73"><span class="dot" style="background: rgb(52, 168, 83);"></span><span class="opt-text">Zircon</span></div></div>
      </div>

      <div>
        <label for="locationFilter">Filter by location</label>
        <select id="locationFilter">
          <option value="">(all)</option>
          <option value="Fungal Marsh">Fungal Marsh</option>
          <option value="Rotwood Swamp">Rotwood Swamp</option>
          <option value="Haunted Creek">Haunted Creek</option>
          <option value="Abyssal Depths" style="color: rgb(75, 0, 130);">Abyssal Depths</option>
          <option value="Azuralite Oasis" style="color: rgb(26, 167, 255);">Azuralite Oasis</option>
          <option value="Crystal Cavern River" style="color: rgb(46, 125, 247);">Crystal Cavern River</option>
          <option value="Crystal Caverns" style="color: rgb(26, 167, 255);">Crystal Caverns</option>
          <option value="Deeproot Spring" style="color: rgb(183, 202, 0);">Deeproot Spring</option>
          <option value="Fortune River" style="color: rgb(241, 194, 50);">Fortune River</option>
          <option value="Fortune River Delta" style="color: rgb(0, 188, 212);">Fortune River Delta</option>
          <option value="Frostbite River" style="color: rgb(86, 168, 255);">Frostbite River</option>
          <option value="Frostbite Waterfall" style="color: rgb(32, 196, 230);">Frostbite Waterfall</option>
          <option value="Frozen Peak" style="color: rgb(106, 60, 255);">Frozen Peak</option>
          <option value="Infernal Heart" style="color: rgb(163, 23, 23);">Infernal Heart</option>
          <option value="Overgrown Grotto" style="color: rgb(29, 177, 74);">Overgrown Grotto</option>
          <option value="Rubble Creek Deposits" style="color: rgb(155, 123, 95);">Rubble Creek Deposits</option>
          <option value="Rubble Creek Sands" style="color: rgb(202, 160, 98);">Rubble Creek Sands</option>
          <option value="Sunset Beach" style="color: rgb(243, 156, 18);">Sunset Beach</option>
          <option value="The Magma Furnace" style="color: rgb(211, 47, 47);">The Magma Furnace</option>
          <option value="The Void" style="color: rgb(191, 191, 191);">The Void</option>
          <option value="Volcanic Sands" style="color: rgb(255, 122, 0);">Volcanic Sands</option>
          <option value="Windswept Beach" style="color: rgb(235, 125, 52);">Windswept Beach</option>
        </select>
      </div>
    </div>

    <div class="head" style="margin-top:10px; justify-content:space-between;">
      <div>
        Mineral: <span class="mineralName" id="mineralName">Aetherite</span>
        <span class="pill" id="rarityBadge" style="background: rgb(251, 188, 4); color: rgb(17, 17, 17);">Legendary</span>
      </div>
      <button id="advChip" class="pill" style="cursor:pointer;">Advanced</button>
    </div>
    <div style="margin-top:6px;">
      <span class="pill" id="rarityBadge">—</span>
    </div>
  </div>

  <div class="card">
    <table id="tbl">
      <thead>
        <tr>
          <th>Location</th>
          <th class="right">Base chance</th>
          <th class="right">Per-attempt chance</th>
          <th class="right">Attempts for 50%</th>
          <th class="right">Attempts for 90%</th>
        </tr>
      </thead>
      <tbody id="tbody"><tr class="best borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(106, 60, 255);">Frozen Peak</td><td class="right mono">0.00025760%</td><td class="right mono">0.0084%</td><td class="right mono">8279.34</td><td class="right mono">27503.37</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(32, 196, 230);">Frostbite Waterfall</td><td class="right mono">0.00025740%</td><td class="right mono">0.0084%</td><td class="right mono">8285.77</td><td class="right mono">27524.74</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(75, 0, 130);">Abyssal Depths</td><td class="right mono">0.00024235%</td><td class="right mono">0.0079%</td><td class="right mono">8800.32</td><td class="right mono">29234.04</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(29, 177, 74);">Overgrown Grotto</td><td class="right mono">0.00023300%</td><td class="right mono">0.0076%</td><td class="right mono">9153.47</td><td class="right mono">30407.16</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(183, 202, 0);">Deeproot Spring</td><td class="right mono">0.00023000%</td><td class="right mono">0.0075%</td><td class="right mono">9272.86</td><td class="right mono">30803.78</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(0, 188, 212);">Fortune River Delta</td><td class="right mono">0.00013679%</td><td class="right mono">0.0044%</td><td class="right mono">15591.48</td><td class="right mono">51793.79</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(46, 125, 247);">Crystal Cavern River</td><td class="right mono">0.00012694%</td><td class="right mono">0.0041%</td><td class="right mono">16801.32</td><td class="right mono">55812.77</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(26, 167, 255);">Azuralite Oasis</td><td class="right mono">0.00011556%</td><td class="right mono">0.0038%</td><td class="right mono">18455.86</td><td class="right mono">61309.04</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(243, 156, 18);">Sunset Beach</td><td class="right mono">0.00011333%</td><td class="right mono">0.0037%</td><td class="right mono">18819.02</td><td class="right mono">62515.43</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(155, 123, 95);">Rubble Creek Deposits</td><td class="right mono">0.00009266%</td><td class="right mono">0.0030%</td><td class="right mono">23017.05</td><td class="right mono">76460.97</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(202, 160, 98);">Rubble Creek Sands</td><td class="right mono">0.00008779%</td><td class="right mono">0.0029%</td><td class="right mono">24293.88</td><td class="right mono">80702.52</td></tr><tr class="borderLeft" style="border-left-color: rgb(251, 188, 4);"><td style="color: rgb(241, 194, 50);">Fortune River</td><td class="right mono">0.00005739%</td><td class="right mono">0.0019%</td><td class="right mono">37162.57</td><td class="right mono">123451.39</td></tr></tbody>
    </table>
  </div>
</div>

<!-- Fallback embedded data (used only if wiki fetch fails).
     Includes fixes: Gloomberry, Umbrite, Uranium key, Abyssal Depths present. -->
<script id="data" type="application/json">{
  "minerals": [
    {
      "mineral": "Aetherite",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.00024235
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.00011556
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.00012694
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.00023
        },
        {
          "location": "Fortune River",
          "chance_percent": 5.739e-05
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.00013679
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.0002574
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 0.0002576
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.00013
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.000233
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 9.266e-05
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 8.779e-05
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 0.00011333
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Amber",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.04846935962
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.0452
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Amethyst",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 4.62233721
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 4.23118283
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 4.38941985
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Ammonite Fossil",
      "locations": [
        {
          "location": "Windswept Beach",
          "chance_percent": 0.00602698
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Aquamarine",
      "locations": [
        {
          "location": "Frostbite River",
          "chance_percent": 0.0001286
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.0001288
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 2.5749e-05
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Ashvein",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.00924467
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.00846237
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 0.01133294
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Astral Spore",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 4.3398e-09
        }
      ],
      "rarity": "exotico"
    },
    {
      "mineral": "Aurorite",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.001454
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.0014
        },
        {
          "location": "Fortune River",
          "chance_percent": 0.00860909
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.0054716
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.001931
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 0.002575
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.0022
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.002334
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.00926614
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 0.0052673
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Azuralite",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.4846935962
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.46223372
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.42311828
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.4518
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.466733
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Bismuth",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.0001627
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Blue Ice",
      "locations": [
        {
          "location": "Frostbite River",
          "chance_percent": 51.496067
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 51.496059
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 51.496949
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Bone",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.01085
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.0086
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Borealite",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.00462234
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.00423118
        },
        {
          "location": "Frostbite River",
          "chance_percent": 0.00515
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.00515
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 0.00515
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Catseye",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 0.00011479
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.00012355
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.00028455
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 0.00027884
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 0.00030135
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Chrysoberyl",
      "locations": [
        {
          "location": "Deeproot Spring",
          "chance_percent": 2e-05
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 1e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Cinnabar",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 0.0002211
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.00011382
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 0.00011154
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Cobalt",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.0019388
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.0181
        },
        {
          "location": "Frostbite River",
          "chance_percent": 0.002575
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.002575
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 0.002575
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.0021699
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.0017
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.018669
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Copper",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.043
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 36.97869766
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 33.84946261
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 22.5883
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 27.1237
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 21.62
        },
        {
          "location": "Infernal Heart",
          "chance_percent": 22.10466356
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 23.33665
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 17.07292935
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 16.73064195
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Coral",
      "locations": [
        {
          "location": "Fortune River Delta",
          "chance_percent": 3.28295772
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 5.66646859
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 6.02698171
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Cryonic Artifact",
      "locations": [
        {
          "location": "Frozen Peak",
          "chance_percent": 6.44e-07
        }
      ],
      "rarity": "exotico"
    },
    {
      "mineral": "Diamond",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 0.00022958
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.00054716
        },
        {
          "location": "Frostbite River",
          "chance_percent": 0.0005145
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.0005148
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 0.0005152
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.0005425
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.0002471
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 0.00013168
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 0.00056665
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Dinosaur Skull",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 3.684e-06
        }
      ],
      "rarity": "exotico"
    },
    {
      "mineral": "Diopside",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.0542
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Dragon Bone",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 0.00147364
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.00085365
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 0.00090405
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Electrum",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 2.7124
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Emerald",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.00290816
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.0027734
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.00253871
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.0027
        },
        {
          "location": "Fortune River",
          "chance_percent": 0.00459151
        },
        {
          "location": "Frostbite River",
          "chance_percent": 0.001931
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.00434
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.0035
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.0028
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.00494194
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 0.00219471
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Fire Opal",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 0.00029473
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.00014227
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 0.00013942
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Firefly Stone",
      "locations": [
        {
          "location": "Deeproot Spring",
          "chance_percent": 5e-05
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 4.7e-05
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Flarebloom",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 1.105e-05
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 8.54e-06
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 2.79e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Frostshard",
      "locations": [
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 3.219e-06
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 2.189e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Glacial Quartz",
      "locations": [
        {
          "location": "Frostbite River",
          "chance_percent": 0.12874
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.12874
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 0.128742
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Gloomberry",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.0004846935962
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Gloomcap",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.0002712
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Glowberry",
      "locations": [
        {
          "location": "Deeproot Spring",
          "chance_percent": 1.3553
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 1.400199
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Glowmoss",
      "locations": [
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.00045
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.000467
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Gold",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 48.46935962
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 36.97869766
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 42.31182826
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 45.1767
        },
        {
          "location": "Fortune River",
          "chance_percent": 57.39392441
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 54.71596192
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 54.2473
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 46.673299
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 61.77423383
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 65.84129772
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 33.46128389
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 34.1458587
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Golden Pearl",
      "locations": [
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.01641479
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 0.02266587
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Inferlume",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 7.4e-06
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 6.77e-06
        },
        {
          "location": "Infernal Heart",
          "chance_percent": 1.105e-05
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 8.5e-06
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 7.81e-06
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 9.04e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Iridium",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 0.00860909
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.0054716
        },
        {
          "location": "Frostbite River",
          "chance_percent": 0.012874
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.012874
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 0.012874
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.01853227
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 0.01316826
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Jade",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 0.28696962
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.21886385
        },
        {
          "location": "Frostbite River",
          "chance_percent": 1.287424
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 1.287402
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 1.287401
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Lapis Lazuli",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.00022
        },
        {
          "location": "Fortune River",
          "chance_percent": 0.10330906
        },
        {
          "location": "Frostbite River",
          "chance_percent": 0.06437
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.06437
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 0.064371
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.043
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.15443558
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 0.0877884
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Lightshard",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.00048469
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.00045
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.00087
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.000467
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Luminum",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.00055468
        },
        {
          "location": "Crystal Caverns",
          "chance_percent": 0.00042312
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.0005
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.00056
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 0.00084997
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Malachite",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.00043
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.09244674
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.08462366
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.0904
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.5425
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.086
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.093347
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 1.20539634
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Mercury",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.001085
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Meteoric Iron",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 0.05739392
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.07412908
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 0.03072594
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 2.23075226
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 0.24107927
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Mythril",
      "locations": [
        {
          "location": "Frostbite River",
          "chance_percent": 5.15e-06
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 5.15e-06
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 6.437e-06
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 3.797e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Neodymium",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.0009
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 1.38670116
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 1.26935485
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 1.3553
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 1.64147886
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 1.400199
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 2.26658744
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Obsidian",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 73.68221188
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 73.672696
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 44.61504519
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 24.10792685
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Onyx",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.04622337
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.04231183
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.05471596
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.1085
        },
        {
          "location": "Infernal Heart",
          "chance_percent": 0.14736442
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 0.05666469
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.11381953
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 0.11153761
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 0.12053963
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Osmium",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.0013867
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.00126935
        },
        {
          "location": "Fortune River",
          "chance_percent": 0.00143485
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 0.002712
        },
        {
          "location": "Infernal Heart",
          "chance_percent": 0.00221047
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.00123548
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.00170729
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 0.00167306
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 0.00180809
        }
      ],
      "rarity": "epico"
    },
    {
      "mineral": "Painite",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 2.908e-06
        },
        {
          "location": "Fortune River",
          "chance_percent": 1.722e-05
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 2.189e-05
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 3.5e-06
        },
        {
          "location": "Infernal Heart",
          "chance_percent": 2.21e-05
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 2.267e-05
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Palladium",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 9.245e-05
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 8.462e-05
        },
        {
          "location": "Fortune River",
          "chance_percent": 2.296e-05
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 8.207e-05
        },
        {
          "location": "Frostbite River",
          "chance_percent": 0.00025751
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Pearl",
      "locations": [
        {
          "location": "Fortune River Delta",
          "chance_percent": 10.94319238
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 16.99940576
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 18.08094514
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Peridot",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 0.07368221
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.05690976
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 0.05576881
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 0.06026982
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Pink Diamond",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 2.87e-05
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 4.377e-05
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 2.471e-05
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 1.756e-05
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 2.231e-05
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Platinum",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 28.6969622
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 30.88711692
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 13.16825954
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Prismara",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 2.77e-06
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 2.800896729e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Pumpkin Soul",
      "locations": [
        {
          "location": "Haunted Creek",
          "chance_percent": 4.3e-07
        }
      ],
      "rarity": "exotico"
    },
    {
      "mineral": "Pyrelith",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 0.29472885
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.22763906
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Pyrite",
      "locations": [
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 13.16825956
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Radiant Gold",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 1.5e-06
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 9e-06
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 1.3e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Red Beryl",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 8.137e-07
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Rose Gold",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 0.00057394
        },
        {
          "location": "Infernal Heart",
          "chance_percent": 0.00044209
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.00061774
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 0.00043894
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.00142274
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 0.00139422
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 0.00150675
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Ruby",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 0.2295757
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.24709694
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 0.21947099
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Sapphire",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 0.57393924
        },
        {
          "location": "Frostbite River",
          "chance_percent": 1.931103
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 1.931102
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 1.931136
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 0.61774234
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Seashell",
      "locations": [
        {
          "location": "Sunset Beach",
          "chance_percent": 48.2158537
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 45.3317487
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Silver",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.034
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 16.9247313
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 18.48934883
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 22.5883
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 27.35798096
        },
        {
          "location": "Frostbite River",
          "chance_percent": 32.185042
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 32.185037
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 32.185593
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 21.62
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 23.33665
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 13.16825956
        }
      ],
      "rarity": "comun"
    },
    {
      "mineral": "Silver Clamshell",
      "locations": [
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.10943192
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 0.16999406
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 0.18080945
        }
      ],
      "rarity": "raro"
    },
    {
      "mineral": "Smoky Quartz",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.0086
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.92446744
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 0.84623657
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.9035
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 1.09431924
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 4.3398
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 3.46
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.933466
        },
        {
          "location": "Sunset Beach",
          "chance_percent": 1.13329372
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Specterite",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.000145
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 0.00014
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 0.00022
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 0.00014
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Star Garnet",
      "locations": [
        {
          "location": "Fungal Marsh",
          "chance_percent": 1.356e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Starshine",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 4.85e-05
        },
        {
          "location": "Azuralite Oasis",
          "chance_percent": 9.245e-05
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 8.462e-05
        },
        {
          "location": "Deeproot Spring",
          "chance_percent": 5e-05
        },
        {
          "location": "Overgrown Grotto",
          "chance_percent": 4.7e-05
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Titanium",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 0.017
        },
        {
          "location": "Fortune River",
          "chance_percent": 11.47878488
        },
        {
          "location": "Frostbite River",
          "chance_percent": 12.874017
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 12.874015
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 12.874237
        },
        {
          "location": "Fungal Marsh",
          "chance_percent": 10.8495
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 8.65
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 4.94193871
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 2.19470992
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Topaz",
      "locations": [
        {
          "location": "Fortune River",
          "chance_percent": 1.43484811
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.54715962
        },
        {
          "location": "Infernal Heart",
          "chance_percent": 2.21046636
        },
        {
          "location": "Rubble Creek Deposits",
          "chance_percent": 1.23548468
        },
        {
          "location": "Rubble Creek Sands",
          "chance_percent": 1.09735496
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 1.70729294
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 1.67306419
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 1.80809451
        }
      ],
      "rarity": "poco_comun"
    },
    {
      "mineral": "Tourmaline",
      "locations": [
        {
          "location": "Frostbite River",
          "chance_percent": 0.0001602
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 0.0001609
        },
        {
          "location": "Frozen Peak",
          "chance_percent": 3.2186e-05
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Umbrite",
      "locations": [
        {
          "location": "Abyssal Depths",
          "chance_percent": 1.21e-07
        }
      ],
      "rarity": "exotico"
    },
    {
      "mineral": "Uranium",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 0.00023112
        },
        {
          "location": "Fortune River",
          "chance_percent": 0.00017218
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 0.00027358
        },
        {
          "location": "Infernal Heart",
          "chance_percent": 0.00044209
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Vineheart",
      "locations": [
        {
          "location": "Deeproot Spring",
          "chance_percent": 1.35e-07
        }
      ],
      "rarity": "exotico"
    },
    {
      "mineral": "Voidstone",
      "locations": [
        {
          "location": "The Void",
          "chance_percent": 7.245e-07
        }
      ],
      "rarity": "exotico"
    },
    {
      "mineral": "Volcanic Core",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 3.68e-06
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 2.85e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Volcanic Key",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 0.00147364
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 0.000854
        }
      ],
      "rarity": "legendario"
    },
    {
      "mineral": "Vortessence",
      "locations": [
        {
          "location": "Azuralite Oasis",
          "chance_percent": 7.4e-06
        },
        {
          "location": "Crystal Cavern River",
          "chance_percent": 6.77e-06
        },
        {
          "location": "Fortune River Delta",
          "chance_percent": 8.21e-06
        },
        {
          "location": "Frostbite River",
          "chance_percent": 1.6737e-05
        },
        {
          "location": "Frostbite Waterfall",
          "chance_percent": 1.6737e-05
        },
        {
          "location": "Haunted Creek",
          "chance_percent": 2.2e-06
        },
        {
          "location": "Windswept Beach",
          "chance_percent": 9.04e-06
        }
      ],
      "rarity": "mitico"
    },
    {
      "mineral": "Zircon",
      "locations": [
        {
          "location": "Infernal Heart",
          "chance_percent": 1.47364424
        },
        {
          "location": "The Magma Furnace",
          "chance_percent": 1.13819529
        },
        {
          "location": "Volcanic Sands",
          "chance_percent": 1.11537613
        }
      ],
      "rarity": "poco_comun"
    }
  ]
}</script>

<script id="colors" type="application/json">{
  "comun":{"label":"Común","color":"#9aa0a6"},
  "poco_comun":{"label":"Poco común","color":"#34a853"},
  "raro":{"label":"Raro","color":"#4285f4"},
  "epico":{"label":"Épico","color":"#a142f4"},
  "legendario":{"label":"Legendario","color":"#fbbc04"},
  "mitico":{"label":"Mítico","gradient":"linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet)"},
  "exotico":{"label":"Exótico","color":"#ea4335"}
}</script>

<script id="locColors" type="application/json">{
  "Abyssal Depths": "#7A46C8",
  "Azuralite Oasis": "#1aa7ff",
  "Crystal Cavern River": "#2e7df7",
  "Crystal Caverns": "#1aa7ff",
  "Deeproot Spring": "#b7ca00",
  "Fortune River": "#f1c232",
  "Fortune River Delta": "#00bcd4",
  "Frostbite River": "#56a8ff",
  "Frostbite Waterfall": "#20c4e6",
  "Frozen Peak": "#6a3cff",
  "Infernal Heart": "#a31717",
  "Overgrown Grotto": "#1db14a",
  "Rubble Creek Deposits": "#9b7b5f",
  "Rubble Creek Sands": "#caa062",
  "Sunset Beach": "#f39c12",
  "The Magma Furnace": "#d32f2f",
  "The Void": "#bfbfbf",
  "Volcanic Sands": "#ff7a00",
  "Windswept Beach": "#eb7d34",
  "Haunted Creek": "#D26A3A",
  "Rotwood Swamp": "#5CA66A",
  "Fungal Marsh": "#4AA4A2"
}</script>

<script>
/* -------- CONFIG: point this at your wiki JSON page -------- */
const WIKI_JSON_URL =
  "https://prospectingwiki.org/w/index.php?title=Project:Data/minerals.json&action=raw&ctype=application/json&origin=*";
/* ----------------------------------------------------------- */

function q(s){ return document.querySelector(s); }
function setTheme(mode){ document.documentElement.setAttribute('data-theme', mode); localStorage.setItem('dropsTheme', mode); q('#themeLabel').textContent = (mode==='dark'?'Dark':'Light'); }
function toggleTheme(){ const cur = document.documentElement.getAttribute('data-theme') || 'light'; setTheme(cur==='light'?'dark':'light'); }
function rollsPerAttempt(luck, cap){ return (luck*0.65*Math.sqrt(Math.max(0,cap)))||0; }
function P_attempt_from_p(p, rolls){ return 1 - Math.pow(1 - p, rolls); }
function N_attempts_for(P_attempt, target){ if (!(P_attempt>0) || !(target>0 && target<1)) return NaN; return Math.log(1-target)/Math.log(1-P_attempt); }
function fmtPct(x){ return (x*100).toFixed(4) + "%"; }
function fmtNum(x){ return Number.isFinite(x) ? x.toFixed(2) : "—"; }

const raritySpec = JSON.parse(document.getElementById('colors').textContent);
const locSpec = JSON.parse(document.getElementById('locColors').textContent);

let dataset = null;
let allMinerals = [];
let filtered = [];
let selectedIdx = 0;
let ADVANCED = false;

/* ---------- wiki loader with fallback ---------- */
async function loadDatasetFromWiki(){
  try{
    const res = await fetch(WIKI_JSON_URL, { mode: "cors", cache: "no-cache" });
    if (!res.ok) throw new Error("HTTP " + res.status);
    const json = await res.json();
    if (!json || !Array.isArray(json.minerals)) throw new Error("Bad JSON shape");
    return json;
  }catch(e){
    console.warn("Wiki fetch failed, using embedded data.", e);
    return JSON.parse(document.getElementById('data').textContent);
  }
}
/* ---------------------------------------------- */

// Color rarity filter options
(function colorRarityOptions(){
  const sel = q("#rarityFilter");
  const map = { comun:"Common", poco_comun:"Uncommon", raro:"Rare", epico:"Epic", legendario:"Legendary", mitico:"Mythic", exotico:"Exotic" };
  for (let i=0;i<sel.options.length;i++){
    const opt = sel.options[i];
    const val = opt.value;
    if (!val || !(val in raritySpec)) continue;
    const spec = raritySpec[val];
    if (spec.color){ opt.style.color = spec.color; }
    else if (spec.gradient){ opt.style.color = "#ff00ff"; }
    opt.textContent = map[val];
  }
})();

function rarityLabel(r){ const t = {comun:"Common", poco_comun:"Uncommon", raro:"Rare", epico:"Epic", legendario:"Legendary", mitico:"Mythic", exotico:"Exotic"}; return t[r] || "—"; }
function applyDot(el, rarity){ const spec = raritySpec[rarity] || {}; el.style.background = "transparent"; if (spec.gradient){ el.style.background = spec.gradient; } if (spec.color){ el.style.background = spec.color; } }
function applyBadge(el, rarity){ const spec = raritySpec[rarity] || {}; el.style.background = ""; el.style.color = ""; if (spec.gradient){ el.style.background = spec.gradient; el.style.color = "#111"; } if (spec.color){ el.style.background = spec.color; el.style.color = "#111"; } }
function colorizeRow(tr, rarity){ const spec = raritySpec[rarity] || {}; tr.classList.add("borderLeft"); if (spec.gradient){ tr.style.borderLeftColor = "#111"; } if (spec.color){ tr.style.borderLeftColor = spec.color; } }
function colorizeLocationText(el, name){ const c = locSpec[name]; if (c){ el.style.color = c; } }

// Custom Select (minerals)
const selectBtn = q("#selectBtn");
const selectList = q("#selectList");
const selectWrap = q("#selectWrap");
const selText = q("#selText");
const selDot = q("#selDot");

function buildOptions(list){
  selectList.innerHTML = "";
  list.forEach((m, idx)=>{
    const div = document.createElement('div');
    div.className = "option"; div.id = "opt-"+idx; div.setAttribute("role", "option"); div.dataset.idx = idx;
    const dot = document.createElement('span'); dot.className = "dot"; applyDot(dot, m.rarity||"");
    const txt = document.createElement('span'); txt.className = "opt-text"; if ((m.rarity||"") === "mitico"){ txt.classList.add("gradient-text"); } txt.textContent = m.mineral;
    div.append(dot, txt);
    div.addEventListener('click', ()=>{ selectedIdx = idx; updateSelection(); selectWrap.classList.remove('open'); });
    selectList.appendChild(div);
  });
}

function updateSelection(){
  const m = filtered[selectedIdx] || {mineral:"—", rarity:""};
  selText.textContent = m.mineral || "—";
  applyDot(selDot, m.rarity||"");
  render();
}

selectBtn.addEventListener('click', ()=>{
  const isOpen = selectWrap.classList.toggle('open'); selectBtn.setAttribute("aria-expanded", isOpen ? "true" : "false");
  if (isOpen){ selectList.focus(); }
});
document.addEventListener('click', (e)=>{ if (!selectWrap.contains(e.target)) selectWrap.classList.remove('open'); });
selectList.addEventListener('keydown', (e)=>{
  if (e.key === 'Escape'){ selectWrap.classList.remove('open'); return; }
  if (e.key === 'ArrowDown'){ selectedIdx = Math.min(selectedIdx+1, filtered.length-1); updateSelection(); ensureVisible(); e.preventDefault(); }
  if (e.key === 'ArrowUp'){ selectedIdx = Math.max(selectedIdx-1, 0); updateSelection(); ensureVisible(); e.preventDefault(); }
  if (e.key === 'Enter'){ selectWrap.classList.remove('open'); }
});
function ensureVisible(){
  const cur = q("#opt-"+selectedIdx); if (!cur) return;
  const top = cur.offsetTop; const bottom = top + cur.offsetHeight;
  if (top < selectList.scrollTop) selectList.scrollTop = top;
  else if (bottom > selectList.scrollTop + selectList.clientHeight) selectList.scrollTop = bottom - selectList.clientHeight;
}

// Search + rarity + location filters
function applySearchAndFilter(){
  const qv = q("#search").value.trim().toLowerCase();
  const rf = q("#rarityFilter").value;
  const lf = q("#locationFilter").value;
  filtered = allMinerals.filter(m => {
    const okName = !qv || (m.mineral||"").toLowerCase().includes(qv);
    const okRarity = !rf || (m.rarity||"") === rf;
    const okLoc = !lf || (m.locations||[]).some(r => (r.location||"") === lf);
    return okName && okRarity && okLoc;
  });
  if (filtered.length === 0){ filtered = [{mineral:"(no results)", locations:[], rarity:""}]; }
  selectedIdx = 0;
  buildOptions(filtered);
  updateSelection();
}

// Table render (auto-sort by per-attempt best)
function findBest(rows, rolls){
  let best = {idx:-1, value:-1};
  rows.forEach((row,i)=>{ const p=(row.chance_percent||0)/100; const val=P_attempt_from_p(p, rolls); if (val>best.value){ best={idx:i,value:val,name:row.location}; } });
  return best;
}

function fmtInt(n){ return (Math.round(n)).toLocaleString(); }
function oneIn(p){
  if (!(p>0)) return "—";
  const inv = Math.round(1/p);
  if (!Number.isFinite(inv) || inv<=0) return "—";
  return `~1 in ${fmtInt(inv)}`;
}

function render(){
  const luck = parseFloat(q("#luck").value)||0;
  const cap = parseFloat(q("#capacity").value)||0;
  const rolls = rollsPerAttempt(luck, cap);
  q("#pulls").textContent = "Rolls per attempt: " + (Number.isFinite(rolls) ? rolls.toFixed(1) : "—");

  const m = filtered[selectedIdx] || {mineral:"—", locations:[], rarity:""};
  q("#mineralName").textContent = m.mineral || "—";
  const badge = q("#rarityBadge"); badge.textContent = rarityLabel(m.rarity||""); applyBadge(badge, m.rarity||"");

  const tbody = q("#tbody"); tbody.innerHTML = "";
  const rows = (m.locations||[]).slice();
  rows.sort((a,b)=>{ const pa=(a.chance_percent||0)/100, pb=(b.chance_percent||0)/100; return P_attempt_from_p(pb, rolls)-P_attempt_from_p(pa, rolls); });

  const best = findBest(rows, rolls);
  q("#bestBadge").textContent = "Best location: " + (best.idx>=0 ? (rows[best.idx].location + " (" + fmtPct(best.value) + ")") : "—");

  rows.forEach((row,i)=>{
    const p=(row.chance_percent||0)/100;
    const P_attempt = P_attempt_from_p(p, rolls);
    const n50 = N_attempts_for(P_attempt, 0.5);
    const n90 = N_attempts_for(P_attempt, 0.9);
    const tr=document.createElement('tr');
    if (i===best.idx) tr.classList.add("best");
    colorizeRow(tr, m.rarity||"");
    const tdA=document.createElement('td'); tdA.textContent=row.location; colorizeLocationText(tdA,row.location);
    const tdB=document.createElement('td'); tdB.className="right mono"; let basePctStr=(row.chance_percent||0).toFixed(8)+"%"; if (ADVANCED){ basePctStr += " ("+oneIn(p)+")"; } tdB.textContent=basePctStr;
    const tdC=document.createElement('td'); tdC.className="right mono"; let pattemptStr = fmtPct(P_attempt); if (ADVANCED){ pattemptStr += " ("+oneIn(P_attempt)+")"; } tdC.textContent = pattemptStr;
    const tdE=document.createElement('td'); tdE.className="right mono"; tdE.textContent=fmtNum(n50);
    const tdF=document.createElement('td'); tdF.className="right mono"; tdF.textContent=fmtNum(n90);
    tr.append(tdA,tdB,tdC,tdE,tdF); tbody.appendChild(tr);
  });
}

// Color options in location filter
function colorLocationOptions(){
  const sel = document.getElementById('locationFilter');
  for (let i=0;i<sel.options.length;i++){
    const opt = sel.options[i], val = opt.value;
    if (!val) continue;
    const c = locSpec[val]; if (c) opt.style.color = c;
  }
}

// Advanced mode
document.addEventListener('DOMContentLoaded', async () => {
  const advBtn = document.getElementById('advChip');
  advBtn.addEventListener('click', () => {
    ADVANCED = !ADVANCED;
    advBtn.textContent = ADVANCED ? "Advanced ✓" : "Advanced";
    render();
  });

  const savedTheme = localStorage.getItem('dropsTheme') || 'light'; setTheme(savedTheme);
  document.getElementById('themeBtn').addEventListener('click', toggleTheme);

  // Load data (wiki first, fallback to embedded)
  dataset = await loadDatasetFromWiki();
  allMinerals = (dataset.minerals||[]).filter(m => (m.locations||[]).length>0).sort((a,b)=>a.mineral.localeCompare(b.mineral));

  colorLocationOptions();
  applySearchAndFilter();

  document.getElementById('luck').addEventListener('input', render);
  document.getElementById('capacity').addEventListener('input', render);
  document.getElementById('search').addEventListener('input', applySearchAndFilter);
  document.getElementById('rarityFilter').addEventListener('input', applySearchAndFilter);
  document.getElementById('locationFilter').addEventListener('input', applySearchAndFilter);
});
</script>

</body></html>